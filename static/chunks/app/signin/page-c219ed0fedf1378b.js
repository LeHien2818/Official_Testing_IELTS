(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[281],{5444:function(e,o,t){Promise.resolve().then(t.bind(t,1032))},9430:function(e,o,t){"use strict";t.d(o,{Z:function(){return r}});var n=t(9481);function r(e){let{theme:o,name:t,props:r}=e;return o&&o.components&&o.components[t]&&o.components[t].defaultProps?(0,n.Z)(o.components[t].defaultProps,r):r}},1032:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return w}});var n=t(7437),r=t(2265),s=t(7999),a=t(4844),i=t(2326),l=t(335),c=t(8433),u=t(4908),d=t(5786),p=t(6548),h=t(9778),m=t(1704),x=t(692),f=t(3607),j=t(6463),g=()=>{let[e,o]=(0,r.useState)(),[t,g]=(0,r.useState)(),[w,Z]=(0,r.useState)({name:"",email:"",phone:"",password:""}),b=(0,j.useRouter)(),[k,y]=(0,r.useState)(!1),C=e=>{let{name:o,value:t}=e.target;console.log(o,t),Z({...w,[o]:t})};(0,r.useEffect)(()=>{void 0!==e&&("Admin"===t?b.push("/dashboard?userid=".concat(e)):b.push("/course?userid=".concat(e)))},[e,t]);let v=async t=>{t.preventDefault();try{let t=await fetch("".concat("http://127.0.0.1:1337/api","/auth/local"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:w.email,password:w.password})}),n=await t.json();if(console.log(n),t.ok){console.log(n.user.id),o(n.user.id);let t=await fetch("".concat("http://127.0.0.1:1337/api","/users/").concat(n.user.id,"?populate=*")),r=await t.json();console.log(r),sessionStorage.setItem("userData",JSON.stringify({token:n.jwt,user:r})),"Admin"===n.user.authen?g("Admin"):(console.log(e),g("User"))}else console.error("Login failed:",n),alert("Login failed. Please check your email and password.")}catch(e){console.error("Error during login:",e)}};return(0,n.jsxs)(s.Z,{component:"form",onSubmit:v,sx:{p:1,backgroundColor:"#002855",display:"flex",alignItems:"center",borderRadius:2,justifyContent:"space-around"},children:[(0,n.jsx)(a.Z,{required:!0,name:"email",placeholder:"email",value:w.email,onChange:C,variant:"outlined",autoComplete:"cuurent-email",InputProps:{startAdornment:(0,n.jsx)(i.Z,{position:"start",children:(0,n.jsx)(m.Z,{})}),style:{backgroundColor:"white",borderRadius:"5px"}},sx:{mr:1}}),(0,n.jsx)(a.Z,{required:!0,name:"password",placeholder:"Password",type:k?"text":"password",value:w.password,onChange:C,variant:"outlined",autoComplete:"current-password",InputProps:{startAdornment:(0,n.jsx)(i.Z,{position:"start",children:(0,n.jsx)(h.Z,{})}),endAdornment:(0,n.jsx)(i.Z,{position:"end",children:(0,n.jsx)(l.Z,{onClick:()=>{y(!k)},children:k?(0,n.jsx)(x.Z,{sx:{color:"black"}}):(0,n.jsx)(f.Z,{sx:{color:"black"}})})}),style:{backgroundColor:"white",borderRadius:"5px"}},sx:{mr:1}}),(0,n.jsx)(c.ZP,{item:!0,children:(0,n.jsx)(u.Z,{control:(0,n.jsx)(d.Z,{sx:{color:"white"}}),label:(0,n.jsx)("span",{style:{color:"white"},children:"Ghi nhớ"})})}),(0,n.jsx)(c.ZP,{item:!0,children:(0,n.jsx)(p.Z,{variant:"text",sx:{color:"white",textTransform:"none"},children:"Qu\xean mật khẩu"})}),(0,n.jsx)(p.Z,{type:"submit",onClick:v,variant:"contained",color:"primary",sx:{backgroundColor:"white",color:"#002855",fontWeight:"bold",textTransform:"none"},children:"Đăng nhập"})]})},w=()=>(0,n.jsx)(g,{})}},function(e){e.O(0,[995,147,844,768,876,971,23,744],function(){return e(e.s=5444)}),_N_E=e.O()}]);